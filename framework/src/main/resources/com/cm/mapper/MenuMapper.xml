<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cm.mapper.MenuMapper">


    <select id="getAdminRouters" resultType="com.cm.domain.entity.Menu">
        select *
        from sys_menu
        where parent_id = 0
          and del_flag = 0
          and status = 0
          and menu_type in ('C', 'M')
        order by order_num
    </select>


    <select id="getRoutersByParentId" resultType="com.cm.domain.entity.Menu">
        select *
        from sys_menu
        where parent_id = #{parentId}
          and del_flag = 0
          and status = 0
          and menu_type in ('C', 'M')
        order by parent_id, order_num
    </select>


    <select id="getRoutersByUserId" resultType="com.cm.domain.entity.Menu">
        select *
        from sys_menu
        where id
            in (
                  select menu_id
                  from sys_role_menu
                  WHERE role_id in (
                      select role_id
                      from sys_user_role
                      where user_id = #{userId}
                  )
              )
          and del_flag = 0
          and status = 0
          and menu_type in ('C', 'M')
        order by order_num
    </select>
</mapper>